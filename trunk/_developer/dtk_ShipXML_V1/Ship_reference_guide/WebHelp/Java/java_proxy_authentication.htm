<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<html>

<!--(==============================================================)-->
<!--(Document created with RoboEditor. )============================-->
<!--(==============================================================)-->

<head>

<title>Proxy Authentication</title>

<!--(Meta)==========================================================-->

<meta name=generator content="RoboHELP by eHelp Corporation - www.ehelp.com">
<meta name=generator-major-version content=0.1>
<meta name=generator-minor-version content=1>
<meta name=filetype content=kadov>
<meta name=filetype-version content=1>
<meta name=page-count content=1>
<meta name=layout-height content=1490>
<meta name=layout-width content=687>
<meta name=date content="10 11, 2001 3:50:02 PM">


<!--(Links)=========================================================-->

<SCRIPT language="javascript" title="WebHelpSplitCss">
<!--
if (navigator.appName=="Netscape")
{   document.write("<LINK rel='StyleSheet' href='../default_ns.css'>");}
else
{   document.write("<LINK rel='StyleSheet' href='../default.css'>");}
//-->
</SCRIPT>
<style>
<!--
table.whs1 {x-cell-content-align: top; width: 100%; border-spacing: 0;}
col.whs2 {width: 100%;}
td.whs3 {padding-right: 10px; padding-left: 10px; border-left-style: Solid; border-left-color: #000000; border-top-color: #000000; border-top-style: Solid; border-right-style: Solid; border-right-color: #000000; border-bottom-color: #000000; border-bottom-style: Solid; border-left-width: 1px; border-top-width: 1px; border-bottom-width: 1px; border-right-width: 1px; background-color: #ffffcb;}
p.whs4 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs5 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs6 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs7 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs8 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs9 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs10 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs11 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs12 {font-size: 10pt; font-family: 'Courier New', monospace;}
table.whs13 {x-cell-content-align: top; width: 100%; border-spacing: 0;}
col.whs14 {width: 100%;}
td.whs15 {padding-right: 10px; padding-left: 10px; border-left-style: Solid; border-left-color: #000000; border-top-color: #000000; border-top-style: Solid; border-right-style: Solid; border-right-color: #000000; border-bottom-color: #000000; border-bottom-style: Solid; border-left-width: 1px; border-top-width: 1px; border-bottom-width: 1px; border-right-width: 1px; background-color: #ffffcb;}
p.whs16 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs17 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs18 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs19 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs20 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs21 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs22 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs23 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs24 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs25 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs26 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs27 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs28 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs29 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs30 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs31 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs32 {font-size: 10pt; font-family: 'Courier New', monospace; margin-left: 60px;}
p.whs33 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs34 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs35 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs36 {font-size: 10pt; font-family: 'Courier New', monospace;}
p.whs37 {font-style: italic;}
p.whs38 {font-family: Arial, sans-serif; font-size: 8pt;}

-->
</style>
<script language="javascript" title="WebHelpInlineScript">
<!--
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) >= 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
//-->
</script>
<style>
<!--
  div.WebHelpPopupMenu {position:absolute; left:0px; top:0px; z-index:4; visibility:hidden;}
  p.WebHelpNavBar {text-align:right;}
-->
</style>
</head>

<!--(Body)==========================================================-->


<body>


<h1><SCRIPT LANGUAGE="JavaScript"><!--
if (navigator.appName=="Netscape")
{ document.write("<img src='../un_global_upslogo.gif' x-maintain-ratio='TRUE' width='50' height='51' border='0'>");}
else
{ document.write("<img src='../un_global_upslogo.gif' x-maintain-ratio='TRUE' style='border: none; width: 50px; height: 51px; float: none;' width='50' height='51' border='0'>");}
//--></SCRIPT><SCRIPT LANGUAGE="JavaScript"><!--
if (navigator.appName=="Netscape")
{ document.write("<img src='../un_global_hed.gif' x-maintain-ratio='TRUE' width='550' height='51' border='0'>");}
else
{ document.write("<img src='../un_global_hed.gif' x-maintain-ratio='TRUE' style='border: none; width: 550px; height: 51px; float: none;' width='550' height='51' border='0'>");}
//--></SCRIPT></h1>

<h1><a name=Proxy></a>Proxy Authentication for Java</h1>

<p>If you access the Internet from behind a firewall, the connection’s 
 Proxy Authorization property has to be set. The ways to set the proxy 
 property differ between HTTP protocol and HTTPS protocol. Since HTTP protocol 
 is not utilized with UPS OnLine Tools, the HTTPS protocol implementation 
 will be detailed below using both SSLite and JSSE.</p>

<p><!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}--></p>

<h2>HTTPS Protocol</h2>

<h3>Code Examples</h3>

<p>The following code example illustrates an implementation using SSLite:</p>

<p>&nbsp;</p>

<!--(Table)=========================================================-->
<table x-use-null-cells cellspacing="0" width="100%" class="whs1">
<col class="whs2">

<tr valign=top>
<td bgcolor="#FFFFCB" width="100%" class="whs3">
<p class="whs4"><span 
 style="font-size: 10pt; font-family: 'Courier New', monospace;"><FONT SIZE=2 style="font-size:10pt;">System.getProperties().put(&quot;https.proxyHost&quot;, 
 proxy);</FONT></span></p>
<p class="whs5">&nbsp;</p>
<p class="whs6">System.getProperties().put(&quot;https.proxyPort&quot;, 
 port);</p>
<p class="whs7">&nbsp;</p>
<p class="whs8">// do 
 this anytime system properties have been related to HTTPS handler</p>
<p class="whs9">com.ibm.samplepackage.https.HttpsClient.resetProperties();</p>
<p class="whs10">&nbsp;</p>
<p class="whs11">// Setup 
 proxy authentication com.ibm.samplepackage.https.HttpsURLConnection.setDefaultAuthenticator(new 
 Https(username, password));</td></tr>
</table>

<p>&nbsp;</p>

<p class="whs12">&nbsp;</p>

<p>Class Https implements the interface of com.ibm.samplepackage.https.HttpsAuthenticator. 
 The source code of Https is <span style="color: #ff0000;"><FONT COLOR=red ><a href="../code_samples/java_Sample_Code/code/Proxy.java">here</a></FONT></span>.</p>

<p><!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}--></p>

<p>The following code example illustrates an implementation using JSSE:</p>

<p>&nbsp;</p>

<!--(Table)=========================================================-->
<table x-use-null-cells cellspacing="0" width="100%" class="whs13">
<col class="whs14">

<tr valign=top>
<td bgcolor="#FFFFCB" width="100%" class="whs15">
<p class="whs16"><span 
 style="font-size: 10pt; font-family: 'Courier New', monospace;"><FONT SIZE=2 style="font-size:10pt;">System.getProperties().put(&quot;https.proxyHost&quot;, 
 proxy);</FONT></span></p>
<p class="whs17">&nbsp;</p>
<p class="whs18">System.getProperties().put(&quot;https.proxyPort&quot;, 
 port);</p>
<p class="whs19">&nbsp;</p>
<p class="whs20">// Setup 
 proxy authentication</p>
<p class="whs21">&nbsp;</p>
<p class="whs22">java.net.Authenticator.setDefault 
 (new PasswordAuthenticator()); </p>
<p class="whs23">&nbsp;</p>
<p class="whs24">PasswordAuthenticator 
 class is defined as the following:</p>
<p class="whs25">&nbsp;</p>
<p class="whs26">import 
 java.net.Authenticator;</p>
<p class="whs27">import 
 java.net.PasswordAuthentication;</p>
<p class="whs28">&nbsp;</p>
<p class="whs29">class 
 PasswordAuthenticator extends Authenticator {</p>
<p class="whs30">&nbsp;</p>
<p class="whs31"><!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->protected 
 PasswordAuthentication getPasswordAuthentication() {</p>
<p class="whs32">System.out.println(&quot;getPasswordAuthentication() 
 called for https connection!!!&quot;);</p>
<p class="whs33"><!--kadov_tag{{<spaces>}}-->&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<!--kadov_tag{{</spaces>}}-->return 
 new PasswordAuthentication(strUser, &quot;password&quot;.toCharArray());</p>
<p class="whs34"><!--kadov_tag{{<spaces>}}-->&nbsp;&nbsp;&nbsp;&nbsp;<!--kadov_tag{{</spaces>}}-->}</p>
<p class="whs35">}</td></tr>
</table>

<p>&nbsp;</p>

<p class="whs36">&nbsp;</p>

<p><span style="font-size: 12pt; font-family: Arial, sans-serif;"><FONT SIZE=3 style="font-size:12pt;">JDK version 
 1.2.1 or greater</FONT></span> is required for the class java.net.Authenticator.</p>

<p><!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}--></p>

<p><a href="../code_samples/java_Sample_Code/code/xmltransmitter.zip">Here</a> 
 is the completed source code of the class XmlTransmitter, which handles 
 reading the XML request file, sending the request to UPS Online Tool server, 
 and writing the XML response to a file. This class uses SSLite for Java 
 1.1.x . In order for the sample code to function, the <a href="../code_samples/java_Sample_Code/sslite.jar">sslite.jar</a> 
 file must be added to the client machine's class path. Included with the 
 sslite.jar is the file named <a href="../code_samples/java_Sample_Code/KeyRing.pfx">KeyRing.pfx</a> 
 that must be used for a successful SSLite implementation. It is recommended 
 that you follow the examples provided by your particular SSL package when 
 implementing the respective code.</p>

<p>&nbsp;</p>

<p>If you already have an XML request file and want to have the XML response 
 write to a file, you can run <span style="font-style: italic;
											font-size: 12pt;
											font-family: 'Times New Roman', serif;"><FONT SIZE=3 style="font-size:12pt;"><I>XmlTransmitter 
 &lt;service&gt;&lt;configuration filename&gt;&lt;xml request filename&gt;&lt;xml 
 response filename&gt;</I></FONT></span>. The configuration file sets the server's 
 host name, connection protocol, location of the file KeyRing.pfx, and 
 proxy server properties. A sample configuration file is <a href="../code_samples/java_Sample_Code/config/system.prop">here</a>. 
 <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->You can 
 modify the values based on your application.</p>

<p>&nbsp;</p>

<p class="whs37">Please refer to &quot;Working with Java 
 Sample Code&quot; before executing or compiling and source code found 
 within this documentation.</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p><a href="#Proxy"><SCRIPT LANGUAGE="JavaScript"><!--
if (navigator.appName=="Netscape")
{ document.write("<img src='../baby_up.jpg' x-maintain-ratio='TRUE' width='20' height='23' border='0'>");}
else
{ document.write("<img src='../baby_up.jpg' x-maintain-ratio='TRUE' style='border: none; width: 20px; height: 23px; float: none;' width='20' height='23' border='0'>");}
//--></SCRIPT>Return to Top</a></p>

<p>&nbsp;</p>

<p class="whs38"><span style="font-family: Arial, sans-serif; font-size: 8pt;"><FONT SIZE=1 style="font-size:8pt;">Copyright 
 © 2006 United Parcel Service of America, Inc.</FONT></span></p>

<p>&nbsp;</p>

</body>

</html>
